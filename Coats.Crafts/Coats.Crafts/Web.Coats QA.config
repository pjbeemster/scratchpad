<?xml version="1.0"?>

<!-- For more information on using web.config transformation visit http://go.microsoft.com/fwlink/?LinkId=125889 -->

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">

  <appSettings>
    <add key="CacheSettings_CallBackInterval" value="600" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="DD4T.CacheSettings.Page" value="86400" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="DD4T.CacheSettings.Component" value="86400" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="DD4T.CacheSettings.System" value="86400" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="DD4T.PublicationId" value="70" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="ODataEndPoint.URL" value="http://tridion.ugc.visitors.service/odata.svc" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="ODataEndPoint.Security.Endpoint" value="http://tridion.ugc.visitors.service/access_token.svc" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="ODataEndPoint.Security.ClientId" value="ugcauthuser" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="ODataEndPoint.Security.ClientSecret" value="$CoatsMTS03!" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="AddressBookId" value="159" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="CraftListCategory" value="tcm:{0}-4044-512" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="CraftAccountStatus" value="tcm:70-1992-1024" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="EmailNewsletterListCategory" value="tcm:{0}-4005-512" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="ProfileVisibleListCategory" value="tcm:{0}-4006-512" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="ProductGroups" value="tcm:{0}-4029-512" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)"/>
    <add key="FooterLinksComponents" value="tcm:{0}-122786" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="RemoteImagePath" value="" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />    
    <add key="ShareACreationEmailAddress" value="maya.patel@coats.com" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="GoogleMapsAPIKey" value="AIzaSyDV5bi5eHkZfrsgUaQOxtxuElCgdecGvW8" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="StoreLocatorFormPath" value="/explore/store-finder" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
    <add key="Brands" value="~/explore/our-brands" xdt:Locator="Match(key)" xdt:Transform="SetAttributes(value)" />
  </appSettings>

  <system.web>
    <compilation xdt:Transform="RemoveAttributes(debug)" />
    <customErrors defaultRedirect="~/error" mode="RemoteOnly" xdt:Transform="Replace">
      <error statusCode="404" redirect="~/page-not-found"/>
    </customErrors>
    <caching xdt:Transform="Replace">
      <outputCacheSettings>
        <outputCacheProfiles>
          <!-- Only Duration, VaryByCustom, and VaryByParam values are supported by default. -->
          <!-- If using FredHopperOutputCache, then Enabled is also supported.               -->
          <add name="FacetedContent" duration="600" varyByCustom="facet" enabled="false" />
          <add name="Homepage" duration="300" enabled="true" />
          <add name="FeaturedItems" duration="300" varyByCustom="facet" enabled="true" />
        </outputCacheProfiles>
      </outputCacheSettings>
    </caching>
  </system.web>

  <system.webServer>
    <handlers>
      <add name="Redirector" verb="GET" path="*" type="Coats.Crafts.Redirector.CoatsGeoIPRedirection" xdt:Transform="Insert" />
    </handlers>
    <modules>
      <remove name="UrlRoutingModule-4.0" xdt:Transform="Insert" />
    </modules>
    <rewrite>
      <rules>
        <rule name="VanityUrls" xdt:Locator="Match(name)" xdt:Transform="Replace">
          <match url="(\w{2}-\w{2})/(.*)" />
          <conditions>
            <add input="{QUERY_STRING}" pattern="vanity_url=1" negate="true" />
            <add input="{CoatsCraftsRedirects:{R:2}}" pattern="(.+)" />
            <add input="##{C:1}" pattern="##([^\?]+)\??(.+)?$" ignoreCase="true" />
          </conditions>
          <action type="Redirect" url="{R:1}/{C:1}?vanity_url=1&amp;{C:2}" redirectType="Permanent" />
        </rule>        
        <rule name="Anchor Level 1 Brand" stopProcessing="true" xdt:Locator="Match(name)" xdt:Transform="Remove" />             
      </rules>
    </rewrite>
  </system.webServer>
  
  <system.serviceModel xdt:Transform="Replace">
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_CoatsServices" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32627" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="FASWebServiceSoapBinding" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="2147483647" maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="SmartTargetDeploymentPortBinding" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="2147483647" maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://tridion.page.service/CoatsTridionpageService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_CoatsServices" contract="CoatsTridionPageServiceRef.ICoatsTridionPageServiceContract" name="TridoinPageService" />
      <endpoint address="http://tridion.component.service/CoatsTridionComponentService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_CoatsServices" contract="CoatsTridionComponentServiceRef.ICoatsTridionComponentServiceContract" name="TridoinComponentService" />
      <endpoint address="http://tridion.link.service/CoatsTridionLinkService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_CoatsServices" contract="CoatsTridionLinkServiceRef.ICoatsTridionLinkServiceContract" name="TridoinLinkService" />
      <endpoint address="http://coats.integration.service/CoatsIntegrationService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_CoatsServices" contract="CoatsIntegrationService.ICoatsIntegrationServiceContract" name="IntegrationService" />
      <endpoint address="http://coaipwebappq01:8180/fredhopper-ws/services/FASWebService" binding="basicHttpBinding" bindingConfiguration="FASWebServiceSoapBinding" contract="FASWebService.FASWebService" name="FASWebService" />
      <endpoint address="http://coats.crafts.integrationservice/Coats.Crafts.IntegrationService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_CoatsServices" contract="CraftsIntegrationService.ICoatsCraftsIntegrationServiceContract" name="BasicHttpBinding_ICoatsCraftsIntegrationServiceContract" />
      <endpoint address="http://coaipwebappq01:8080/SmartTargetDeploymentWebService/SmartTargetDeploymentWebService" binding="basicHttpBinding" bindingConfiguration="SmartTargetDeploymentPortBinding" contract="SmartTargetDeploymentWebService.SmartTargetDeployment" name="SmartTargetDeploymentPort" />
    </client>
  </system.serviceModel>

  <CtaTemplateIdSection xdt:Transform="Replace">
    <!--
    <add tcmId="19939" description="Find A Store (Pod)"/>
    <add tcmId="19946" description="Get Involved (Pod)"/>
    -->
  </CtaTemplateIdSection>

  <CountryConfigSection xdt:Transform="Replace">
    <add name="United Kingdom" url="/en-gb" culture="en-gb" />
    <add name="United States" url="/en-us" culture="en-us" />
  </CountryConfigSection>

  <SocialMediaLinkSection xdt:Transform="Replace">
    <add name="Pinterest" href="http://www.pinterest.com/coatsandclark/" title="" class="pinterest-light" />
    <add name="Facebook" href="https://www.facebook.com/pages/Coats-Crafts-UK/335056417389" title="" class="facebook-light" />
  </SocialMediaLinkSection>
</configuration>